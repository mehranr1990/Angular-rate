<div class="p-8">
    <p-table [value]="coins" [tableStyle]="{ 'min-width': '50rem' }" dataKey="id" [expandedRowKeys]="expandedRows" (onRowExpand)="onRowExpand($event)" (onRowCollapse)="onRowCollapse($event)">
        <ng-template pTemplate="header">
        
        <!-- مواردی که در صفحه اصلی هستند و باز میشوند -->
            <tr>
                <th></th>
                <th>Name</th>
                <th>Image</th>
                <th>Buy Price</th>
                <th>Sell Price</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product let-expanded="expanded">
            <tr>
                <td>
                    <p-button type="button" pRipple [pRowToggler]="product" [text]="true" [rounded]="true" [plain]="true" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'" />
                </td>
                <td>{{ product.name }}</td>
                <td><img [src]="product.image" [alt]="product.name" width="50" class="shadow-4" /></td>
                <td>{{ product.buyprice }}</td>
                <td>{{ product.sellprice }}</td>

            </tr>
        </ng-template>
        
        <!-- مواردی که بعد از کلیک کردن نمایش داده میشوند-->
        <ng-template pTemplate="rowexpansion" >
            <tr>
                <td colspan="7">
                    <div class="p-3">
                        <p-table [value]="coins" dataKey="id">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>Name</th>
                                    <th>Image</th>
                                    <th>Buy Price</th>
                                    <th>Sell Price</th>
                                    <th></th>
                                    <th style="width: 4rem"></th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-product>
                                <tr>
                                    <td>{{ product.name }}</td>
                                    <td><img [src]="product.image" [alt]="product.name" width="50" class="shadow-4" /></td>
                                    <td>{{ product.buyprice }}</td>
                                    <td>{{ product.sellprice }}</td>
                                    <td>
                                    </td>
                                    <td><p-button type="button" icon="pi pi-search" /></td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="emptymessage">
                                <tr>
                                    <td colspan="6">There are no order for this product yet.</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>